"use strict";(self.webpackChunkadmin_dashboard=self.webpackChunkadmin_dashboard||[]).push([[573],{7573:(L,v,d)=>{d.r(v),d.d(v,{OrdersModule:()=>V});var y=d(2057),x=d(9306),C=d(5319),M=d(6363),O=d(5917),g=d(8364),h=d(2340),A=d(5257),T=d(2996),p=d(3342),t=d(1989),E=d(5464),I=d(2790),j=d(8567);function Z(l,u){if(1&l&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&l){const r=u.$implicit;t.Tol(r.class),t.xp6(1),t.hij(" ",r.y[r.x.view.subProp]," ")}}function B(l,u){if(1&l){const r=t.EpF();t.TgZ(0,"button",4),t.NdJ("click",function(){return t.CHM(r).$implicit.click()}),t._uU(1),t.qZA()}if(2&l){const r=u.$implicit;t.Tol(r.class),t.xp6(1),t.hij(" ",r.x.view.text," ")}}function $(l,u){if(1&l){const r=t.EpF();t.TgZ(0,"button",4),t.NdJ("click",function(){return t.CHM(r).$implicit.click()}),t._uU(1),t.qZA()}if(2&l){const r=u.$implicit;t.Tol(r.class),t.xp6(1),t.hij(" ",r.x.view.text," ")}}const k=function(){return{val:"Pod"}},N=function(){return{val:""}},w=function(){return{val:"Title0"}},F=function(){return{val:"Pod0"}},P=[{path:"",component:(()=>{class l{constructor(r,i,m){this.ref=r,this.vcf=i,this.ryber=m,this.meta={name:"Orders"},this.myClass=`a_p_p_${this.meta.name}View`,this.prefix={main:(0,g.Fq)({view:`${this.meta.name}Main`}),view:(0,g.Fq)({view:`${this.meta.name}`}),pods:Array(1).fill(null).map((n,s)=>(0,g.Fq)({view:`${this.meta.name}Pod`+s}))},this.subs=new C.w,this.orders={title:{text:"orders.title"},fn0:n=>{let{table:s,target:e}=n;return{user:s.util.pullValues({target:e.user}).username,total:s.util.pullValues({target:e.total}).value,billing:{items:s.util.pullValues({target:e.billing})},shipping:{info:{items:s.util.pullValues({target:e.shipping})}},cart:Object.entries(e).filter((a,o)=>{let[c,b]=a;return c.startsWith("cart Item")}).map((a,o)=>{let[c,b]=a;return s.util.pullValues({target:b})})}},table:{searchBy:{placeholder:{text:""},options:{items:Array(3).fill(null).map((n,s)=>({text:"",style:{},stateText:["user","total","orderId"][s]}))},icon:{}},search:{label:{text:""},button:{text:""},reset:{text:""}},details:{create:{loading:this.ryber.loading,url:`${h.N.backend.url}/order/create`,method:"PUT",request:{text:"",clickAux:()=>{let{table:n}=this.orders,a={user:{username:""},billing:Object.fromEntries(["First Name","Last Name","Email","Phone","Address","City","State","Zip Code","Country"].map((o,c)=>[o.toLowerCase().split(" ").join("_"),""])),shipping:Object.fromEntries(["First Name","Last Name","Email","Phone","Address","City","State","Zip Code","Country"].map((o,c)=>[o.toLowerCase().split(" ").join("_"),""])),total:{value:""},"cart Item 1":{name:"",price:"",quantity:""}};return n.util.toInputInPlace({myResult:a}),a}},confirm:{text:"",clickAux:()=>{let{table:n,fn0:s}=this.orders,{target:e}=n.details.values,a=s({table:n,target:e});return a.shipping.sameAsBilling={checked:!1},{body:{data:a}}}}},update:{text:"",loading:this.ryber.loading,url:`${h.N.backend.url}/order/adminUpdate`,method:"PATCH",clickAux:()=>{let{table:n,fn0:s}=this.orders,{target:e,meta:a}=n.details.values;return{body:{data:{orderId:a.orderId.value,update_body:s({table:n,target:e})}}}}},delete:{text:"",loading:this.ryber.loading,url:`${h.N.backend.url}/order/adminDelete`,method:"DELETE",clickAux:()=>{let{meta:s}=this.orders.table.details.values;return{body:{data:{orderId:s.orderId.value}}}}}},pages:{per:{input:{value:20},label:{text:""}},current:{input:{value:1}}},headers:{items:Array(7).fill(null).map((n,s)=>({title:{text:""},sort:{confirm:[!0,!0,!0,!1,!1,!1][s]},view:{subProp:["user","total","orderId","cart","billing","shipping","modify"][s],text:"",type:["text","text","text","view","view","view","modify"][s]}}))},db:{items:[],displayItems:[]},util:{listItems:()=>{let{orders:n,ryber:s}=this,e=parseInt(n.table.pages.current.input.value)-1,a=parseInt(n.table.pages.per.input.value);(0,M.s)(()=>!n.table.pages.list.retrieved.has(e),s.http.post(`${h.N.backend.url}/order/list`,{data:{pages:{page:e,per_page:a}}}),(0,O.of)({})).pipe((0,A.q)(1),(0,T.j)("message","list"),(0,p.b)(o=>{n.table.db.xhrItems.next({data:o})})).subscribe()},metaForEntry:n=>{let{entry:s}=n,e={};return["user","total","orderId"].map((a,o)=>{e[a]={value:s[a].toString()}}),e},customInteractMods:n=>{let{orders:s}=this,{key:e,item:a}=n;switch(e){case"cart":let o={};return a.forEach((b,f)=>{o[f+1]=b}),o;case"shipping":return{info:a.info.items,sameAsBilling:a.sameAsBilling};case"modify":let c={user:{username:a.user},billing:a.billing.items,shipping:Object.assign({},a.shipping.info.items),total:{value:a.total}};return a.cart.forEach((b,f)=>{c["cart Item "+(f+1)]=b}),s.table.util.toInputInPlace({myResult:c}),c;default:return!1}}}}}}ngOnInit(){let{ryber:r,orders:i,subs:n}=this;[r.translate.get("orders.search.button").pipe((0,p.b)(e=>{i.table.search.button.text=e})),r.translate.get("orders.search.label").pipe((0,p.b)(e=>{i.table.search.label.text=e})),r.translate.get("orders.searchBy.placeholder").pipe((0,p.b)(e=>{i.table.searchBy.placeholder.text=e})),r.translate.get("orders.searchBy.options").pipe((0,p.b)(e=>{i.table.searchBy.options.items.forEach((a,o)=>{a.text=e[o]})})),r.translate.get("orders.reset").pipe((0,p.b)(e=>{i.table.search.reset.text=e})),r.translate.get("orders.create").pipe((0,p.b)(e=>{i.table.details.create.request.text=e,i.table.details.create.confirm.text=e})),r.translate.get("orders.delete").pipe((0,p.b)(e=>{i.table.details.delete.text=e})),r.translate.get("orders.update").pipe((0,p.b)(e=>{i.table.details.update.text=e})),r.translate.get("orders.pages.per.label").pipe((0,p.b)(e=>{i.table.pages.per.label.text=e})),r.translate.get("orders.headers").pipe((0,p.b)(e=>{i.table.headers.items.forEach((a,o)=>{a.title.text=e[o].title,a.view.text=e[o].view})}))].map((e,a)=>{n.add(e.subscribe())})}ngOnDestroy(){this.subs.unsubscribe()}}return l.\u0275fac=function(r){return new(r||l)(t.Y36(t.sBO),t.Y36(t.s_b),t.Y36(E.p))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-main"]],hostVars:2,hostBindings:function(r,i){2&r&&t.Tol(i.myClass)},decls:12,vars:19,consts:[[3,"table","textEntry","viewEntry","modifyEntry"],["text",""],["view",""],["modify",""],[3,"click"]],template:function(r,i){if(1&r&&(t.TgZ(0,"main"),t.TgZ(1,"section"),t.TgZ(2,"h1"),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.qZA(),t._UZ(5,"app-inventory",0),t.qZA(),t.YNc(6,Z,2,3,"ng-template",null,1,t.W1O),t.YNc(8,B,2,3,"ng-template",null,2,t.W1O),t.YNc(10,$,2,3,"ng-template",null,3,t.W1O)),2&r){const m=t.MAs(7),n=t.MAs(9),s=t.MAs(11);t.Tol(i.prefix.main(t.DdM(15,k))),t.xp6(1),t.Tol(i.prefix.pods[0](t.DdM(16,N))),t.xp6(1),t.Tol(i.prefix.pods[0](t.DdM(17,w))),t.xp6(1),t.Oqu(t.lcZ(4,13,i.orders.title.text)),t.xp6(2),t.Tol(i.prefix.main(t.DdM(18,F))),t.Q6J("table",i.orders.table)("textEntry",m)("viewEntry",n)("modifyEntry",s)}},directives:[I.d],pipes:[j.X$],encapsulation:2,changeDetection:0}),l})()}];let D=(()=>{class l{}return l.\u0275fac=function(r){return new(r||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[[x.Bz.forChild(P)],x.Bz]}),l})();var U=d(5209);let V=(()=>{class l{}return l.\u0275fac=function(r){return new(r||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[[y.ez,D,U.m]]}),l})()}}]);